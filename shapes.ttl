@prefix dash:   <http://datashapes.org/dash#> .
@prefix rdf:    <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:   <http://www.w3.org/2000/01/rdf-schema#> .
@prefix schema: <https://schema.org/> .
@prefix sh:     <http://www.w3.org/ns/shacl#> .
@prefix xsd:    <http://www.w3.org/2001/XMLSchema#> .
@prefix sc:     <https://w3di.org/idlab/ns/supply-chain/#> .
@prefix frapo:  <http://purl.org/cerif/frapo/> .
@prefix scro:   <https://www.industrialontologies.org/ontology/supplychain/SCRO/> .
@prefix io:     <http://www.industrialontologies.org/core#> .

# Shapes

sc:ItemShape
    a              sh:NodeShape ;
    sh:targetClass schema:Product ;
    sh:property    sc:NameProperty ;
    sh:property    [ sh:path     schema:description ;
                     sh:minCount 1 ;
                     sh:datatype xsd:string ;
                     sh:name     "description" ] .

sc:CustomerShape
    a              sh:NodeShape ;
    sh:targetClass io:Customer ;
    sh:property    sc:NameProperty, sc:AddressProperty ;
    sh:property    [ sh:path     rdf:type ;
                     sh:minCount 2 ;
                     sh:in       ( schema:Person schema:Organization io:Customer ) ;
                     sh:name     "required extra classes" ] .

sc:SupplierShape
    a              sh:NodeShape ;
    sh:targetClass io:Supplier ;
    sh:property    sc:NameProperty ;
    sh:property    [ sh:path     rdf:type ;
                     sh:minCount 2 ;
                     sh:in       ( schema:Organization io:Supplier ) ;
                     sh:name     "required extra classes" ] .

sc:VendorLocationShape
    a              sh:NodeShape ;
    sh:targetClass scro:StorageFacility ;
    sh:property    sc:NameProperty ;
    sh:property    sc:AddressProperty ;
    sh:property    [ sh:path     rdf:type ;
                     sh:minCount 2 ;
                     sh:in       ( scro:StorageFacility schema:Place ) ;
                     sh:name     "required extra classes" ] ;
    sh:property    [ sh:path     sc:servableCustomer ;
                     sh:minCount 0 ;
                     sh:name     "customer that this location can serve" ] ;
    sh:property    [ sh:path     sc:buyableSupplier ;
                     sh:minCount 0 ;
                     sh:name     "supplier that this location can buy from" ] ;
    sh:property    [ sh:path     sc:supportedItem ; # TODO: restrict to subclass of schema:Product
                     sh:minCount 1 ;
                     sh:name     "items that are supported by this location" ] .

sc:CustomerLocationShape
    a              sh:NodeShape ;
    sh:targetClass schema:Place ;
    sh:property    sc:AddressProperty .

sc:SupplierItemOptionShape
    a              sh:NodeShape ;
    sh:targetClass schema:Offer ;
    sh:property    sc:ItemProperty ;
    sh:property    [ sh:path     schema:seller ;
                     sh:minCount 1 ;
                     sh:maxCount 1 ;
                     sh:name     "supplier of the item" ] ;
    sh:property    [ sh:path     sc:predictionModel ;
                     sh:minCount 1 ;
                     sh:maxCount 1 ;
                     sh:name     "predication model" ] .

sc:LateDeliveryPenaltyShape
    a              sh:NodeShape ;
    sh:targetClass schema:Offer ;
    sh:property    [ sh:path     schema:customer ;
                     sh:minCount 1 ;
                     sh:maxCount 1 ;
                     sh:name     "customer of the penalty" ] .

sc:LocationToLocationShape
    a              sh:NodeShape ;
    sh:targetClass sc:LocationToLocation ;
    sh:property    [ sh:path     schema:fromLocation ;
                     sh:minCount 1 ;
                     sh:maxCount 1 ;
                     sh:name     "from location" ] ;
    sh:property    [ sh:path     schema:toLocation ;
                     sh:minCount 1 ;
                     sh:maxCount 1 ;
                     sh:name     "to location" ] ;
    sh:property    [ sh:path     sc:replenishmentMethod ;
                     sh:minCount 1 ;
                     sh:name     "how products are moved from one location to the other" ] .

sc:SupplierItemLocationOptionShape
    a              sh:NodeShape ;
    sh:targetClass sc:SupplierItemLocationOption ;
    sh:property    [ sh:path     schema:address ;
                     sh:minCount 1 ;
                     sh:maxCount 1 ;
                     sh:name     "location" ] ;
    sh:property    [ sh:path     sc:supplierItemOption ;
                     sh:minCount 1 ;
                     sh:maxCount 1 ;
                     sh:name     "supplier item option" ] ;
    sh:property    [ sh:path     schema:price ;
                     sh:minCount 1 ;
                     sh:maxCount 1 ;
                     sh:name     "price of the supplier item option" ] ;
    sh:property    [ sh:path     sc:quantityRestrictions ;
                     sh:minCount 1 ;
                     sh:name     "quantity restrictions of the supplier item option" ] .

sc:LocationItemOptionShape
    a              sh:NodeShape ;
    sh:targetClass sc:LocationItemOption ;
    sh:property    sc:ItemProperty ;
    sh:property    [ sh:path     schema:address ;
                     sh:minCount 1 ;
                     sh:maxCount 1 ;
                     sh:name     "location" ] ;
    sh:property    [ sh:path     sc:inventoryHoldingCosts ;
                     sh:minCount 1 ;
                     sh:maxCount 1 ;
                     sh:name     "inventory holding costs" ] .

sc:OrderShape
    a              sh:NodeShape ;
    sh:targetClass schema:Order ;
    sh:property    [ sh:path     schema:orderedItem ;
                     sh:minCount 1 ;
                     sh:class    schema:OrderItem ;
                     sh:name     "ordered item" ] ;
    sh:property    [ sh:path     schema:customer ;
                     sh:minCount 1 ;
                     sh:maxCount 1 ;
                     sh:name     "customer of the order" ] .

sc:OrderItemShape
    a              sh:NodeShape ;
    sh:targetClass schema:OrderItem ;
    sh:property    [ sh:path     schema:orderedItem ;
                     sh:minCount 1 ;
                     sh:class    schema:Product ;
                     sh:name     "ordered item" ] ;
    sh:property    [ sh:path     schema:orderQuantity ;
                     sh:minCount 1 ;
                     sh:maxCount 1 ;
                     sh:name     "quantity of the item" ] .

sc:VendorShape
    a              sh:NodeShape ;
    sh:targetClass schema:Vendor ;
    sh:property    sc:NameProperty ;
    sh:property    [ sh:path     schema:hasOfferCatalog ;
                     sh:minCount 1 ;
                     sh:maxCount 1 ;
                     sh:name     "portfolio of items" ] ;
    sh:property    [ sh:path     schema:fromLocation ;
                     sh:class    schema:Place ;
                     sh:minCount 1 ;
                     sh:name     "outbound location" ] .

sc:QuotationShape
    a              sh:NodeShape ;
    sh:targetClass frapo:Quotation ;
    sh:property    [ sh:path     sc:leadTime ;
                     sh:minCount 1 ;
                     sh:maxCount 1 ;
                     sh:name     "lead time" ] ;
    sh:property    [ sh:path     schema:distance ;
                     sh:minCount 1 ;
                     sh:maxCount 1 ;
                     sh:name     "distance to customer (?) of item" ] ;
    sh:property    [ sh:path     schema:orderQuantity ;
                     sh:minCount 1 ;
                     sh:maxCount 1 ;
                     sh:name     "quantity of item" ] ;
    sh:property    [ sh:path     schema:orderedItem ;
                     sh:minCount 1 ;
                     sh:class    schema:Product ;
                     sh:name     "ordered item" ] ; .

sc:FeedbackShape
    a              sh:NodeShape ;
    sh:targetClass scro:RecivingProcess ;
    sh:property    [ sh:path     sc:netOrderCost ;
                     sh:minCount 1 ;
                     sh:maxCount 1 ;
                     sh:name     "net order cost" ] ;
    sh:property    [ sh:path     sc:deliveredQuantity ;
                     sh:minCount 1 ;
                     sh:maxCount 1 ;
                     sh:name     "actual delivered quantity" ] ;
    sh:property    [ sh:path     schema:deliveryLeadTime ;
                     sh:minCount 1 ;
                     sh:maxCount 1 ;
                     sh:name     "actual delivery lead time" ] ;
    sh:property    [ sh:path     schema:orderedItem ;
                     sh:minCount 1 ;
                     sh:maxCount 1 ;
                     sh:class    schema:Product ;
                     sh:name     "ordered item" ] ; .

# Properties

sc:NameProperty
    sh:path     schema:name ;
    sh:minCount 1 ;
    sh:datatype xsd:string ;
    sh:name     "name" .

sc:AddressProperty
    sh:path     schema:address ;
    sh:minCount 1 ;
    sh:datatype schema:PostalAddress ;
    sh:name     "address" .

sc:ItemProperty
    sh:path     schema:seller ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:name     "supplier of the item" .